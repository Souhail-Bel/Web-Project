<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Carpooling</title>
    <meta name="description" content="Find and share rides across Tunisia" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css"
    />
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"
    />
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <link href="style_cp.css" rel="stylesheet" />
    <script defer src="script_cp.js"></script>
  </head>

  <body>
    <aside id="sidebar">
      <header class="app-header">
        <div class="brand">
          <div class="brand-icon">
            <i data-lucide="car"></i>
          </div>
          <div class="brand-text">
            <h1>Carpool :P</h1>
            <span class="brand-subtitle">Share the journey</span>
          </div>
        </div>
        <div class="user-status">
          <span class="status-dot"></span>
          <strong>CUN</strong>
        </div>
      </header>

      <div class="search-container">
        <div class="input-group">
          <label for="input-from">
            <i data-lucide="map-pin" class="label-icon"></i>
            From
          </label>
          <div class="input-wrapper">
            <input
              type="text"
              id="input-from"
              placeholder="Current Location (CUN)"
              aria-label="Departure location"
            />
            <button
              class="clear-btn"
              id="clear-from"
              aria-label="Clear from"
              style="display: none"
            >
              <i data-lucide="x"></i>
            </button>
          </div>
        </div>

        <button
          class="swap-btn"
          id="swap-locations"
          aria-label="Swap locations"
        >
          <i data-lucide="arrow-down-up"></i>
        </button>

        <div class="input-group">
          <label for="input-to">
            <i data-lucide="flag" class="label-icon"></i>
            To
          </label>
          <div class="input-wrapper">
            <input
              type="text"
              id="input-to"
              placeholder="e.g. Kebili, Safaqos..."
              aria-label="Destination"
            />
            <button
              class="clear-btn"
              id="clear-to"
              aria-label="Clear to"
              style="display: none"
            >
              <i data-lucide="x"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="filter-chips">
        <button class="chip active" data-sort="all">
          <i data-lucide="list"></i>
          All Rides
        </button>
        <button class="chip" data-sort="price-low">
          <i data-lucide="arrow-down"></i>
          Price: Low
        </button>
        <button class="chip" data-sort="time-soon">
          <i data-lucide="timer-reset"></i>
          Time: Soonest
        </button>
      </div>

      <div class="list-header">
        <h2>Available Rides</h2>
        <span class="badge" id="count-badge">5</span>
      </div>

      <div id="ride-list" class="ride-list"></div>

      <div class="empty-state" id="empty-state" style="display: none">
        <i data-lucide="search-x"></i>
        <h3>No rides found</h3>
        <p>Try adjusting your search criteria</p>
      </div>
    </aside>

    <main>
      <div id="map"></div>

      <div class="map-controls">
        <button
          class="map-btn"
          id="locate-btn"
          aria-label="Center on your location"
          title="Your location"
        >
          <i data-lucide="locate"></i>
        </button>
        <button
          class="map-btn"
          id="fit-bounds-btn"
          aria-label="Show all rides"
          title="Show all rides"
        >
          <i data-lucide="maximize"></i>
        </button>
      </div>

      <div class="route-details" id="route-details" style="display: none">
        <button
          class="close-route"
          id="close-route"
          aria-label="Close route details"
        >
          <i data-lucide="x"></i>
        </button>
        <div class="route-details-content">
          <h3 id="route-driver">Driver Name</h3>
          <div class="route-path">
            <span id="route-from">From</span>
            <i data-lucide="arrow-right"></i>
            <span id="route-to">To</span>
          </div>
          <div class="route-stats">
            <div class="stat">
              <i data-lucide="clock"></i>
              <span id="route-duration">--</span>
            </div>
            <div class="stat">
              <i data-lucide="map"></i>
              <span id="route-distance">--</span>
            </div>
            <div class="stat-price">
              <i data-lucide="coins"></i>
              <strong id="route-price">--</strong>
            </div>
          </div>
          <button class="book-btn">
            <i data-lucide="calendar-check"></i>
            Book
          </button>
        </div>
      </div>
    </main>

    <script>
      lucide.createIcons();
    </script>
  </body>
</html>
